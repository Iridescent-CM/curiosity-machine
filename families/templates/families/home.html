{% extends "families/base.html" %}
{% load staticfiles %}

{% block js %}
  <script type="text/javascript" src="{% static 'js/libs/jquery.circliful.min.js' %}"></script>
  <script>
    $(function(){
      $('*[data-percent]').circliful();
    });
  </script>
{% endblock %}

{% block content %}
  {% include 'families/_navigation.html' %}

  <div class="row">
    <div class="col-md-4">
      <h3>Family</h3>
      <ul style="border-radius: 30px;
	  border-style: solid;
	  border-color: #E3E3DD;
      padding: 20px; 
	  border-width: 2px;">
      {% for familymember in request.user.familymember_set.all %}
          <div class="row" style="padding: 10px;">
			{% include "_familyavatar.html" with profile=familymember width=60 height=60 crop='thumb' gravity='faces' %}
			{% comment %} FIXME: FamilyMember as Profile above {% endcomment %}
			<span class="dashboard-inline-username" style="border-radius: 15px 30px 30px;
			background: #73AD21;
			padding: 20px;">{{ familymember.name }}</span>
		  </div>
      {% endfor %}
      </ul>
    </div>

    <div class="col-md-8">
      <h3>Progress</h3>
      <div class="row" style="border-radius: 30px;
	  border-style: solid;
	  border-color: #E3E3DD;
      padding-bottom: 20px; 
	  padding-top: 5px; 
	  border-width: 2px;">
      {% for stage in stages %}
        <div class="col-xs-4" style="text-align:center;">
          <div
            data-percent={{stage.stats.percent_complete}}
            data-replacePercentageByText="{{stage.stats.completed}} of {{stage.stats.total}}"
            data-animationStep=20
			data-foregroundBorderWidth= 30
            data-backgroundBorderWidth= 30
			{% if stage.stats.completed == stage.stats.total %}
				data-foregroundColor = '#73AD21'
			{% endif %}
			data-backgroundColor= '#666'
			data-fontColor= '#666'
          ></div>
		  <p>Stage {{stage.number}}</p>
        </div>
      {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
