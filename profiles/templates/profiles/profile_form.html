{% extends "curiositymachine/layout/base.html" %}
{% load bootstrap4 %}

{% block js %}
  {{ form.media }}
{% endblock %}

{% block body-id %}{% endblock %}
{% block body-classes %}account-settings{% endblock %}

{% block content %}
<div class="jumbotron cm-jumbotron jumbotron-blue jumbotron-fluid py-5">
    <h1 class="my-3">Account Settings</h1>
</div>
<div class="container mb-5">
  {% if messages %}{% for message in messages %}
  <div class="alert {{ message.tags }} alert-dismissable show" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
    {{ message }}
  </div>
  {% endfor %}{% endif %}
  <div class="row">
    <div class="col-md-8 offset-md-2">
      {% block cards %}
      <div class="card cm-info-card">
        <div class="card-header text-center p-3">
          <h4 class="card-title">{% block card_title %}Profile Info{% endblock %}</h4>
        </div>
        <div class="card-body">
          <form action="{% block action %}{% endblock %}" method="POST" novalidate>
            {% csrf_token %}
            {% block fields %}
              {% block avatar %}
                {% include "profiles/_avatar.html" with profile=request.user.profile width=80 height=80 crop='thumb' gravity='faces' classes='rounded-circle' %}
              {% endblock %}
            {% endblock %}
            {% block navbutton %}
            {% if form.instance and form.instance.pk %}
            <a class="btn btn-secondary" href="{% url "account_change_password"%}">Change password</a>
            {% endif %}
            {% endblock %}
            <input type="submit" class="btn btn-primary float-right" value="Save">
          </form>
        </div>
      </div>
      {% endblock %}
    </div>
  </div>
</div>
{% endblock %}
