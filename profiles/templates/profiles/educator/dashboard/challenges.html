{% extends "curiositymachine/layout/base.html" %}
{% load staticfiles %}
{% load resized %}
{% block title %}Curiosity Machine - Home{% endblock %}
{% block body-classes %}educator-dashboard{% endblock %}

{% block content %}

{% include 'profiles/educator/dashboard/_header.html' %}

<div class="container m-b-lg">

  {% include 'profiles/educator/dashboard/_navigation.html' with activeNav="challenges" %}

  <div class="row p-b">
    <div class="col-md-12">
      <h2>Free Design Challenges</h2>
      <p>Get started with one of our free design challenges! To view the educator resources associated with each of the challenges, click the Guide tab in the design challenge preview.</p>
    </div>
  </div>

  <div class="row">
    <!--  these expandable cards need to be 2 to a row -->

    {% for challenge in challenges %}
    <div class="col-md-6 m-b">
      <div class="expandable-card">
        <div>
          <a href="{% url "challenges:preview_inspiration" challenge_id=challenge.id %}" class="action-img">
            <img class="pull-left m-r" src="{% resized challenge.image.url width=165 height=165 crop='thumb' %}" alt="{{ challenge.name }}">
          </a>
          <div class="expandable-card-title">
            <h3>
              <a href="{% url "challenges:preview_inspiration" challenge_id=challenge.id %}" class="action-img">
                {{ challenge.name }}
              </a>
            </h3>

            <a class="expandable-card-toggle" data-text-swap="&minus; LESS INFO" data-toggle="collapse" href="#moreInfo-{{ challenge.id }}" aria-expanded="false" aria-controls="moreInfo-{{ challenge.id }}">
              &plus; MORE INFO
            </a>
          </div>
        </div>

        <div class="collapse" id="moreInfo-{{ challenge.id }}">
          <div class="expandable-card-more">
            <span class="expandable-card-more-section-title">DESCRIPTION</span>
            <p>{{ challenge.description }}</p>

            {% if challenge.resource_set.count %}
            <span class="expandable-card-more-section-title">RESOURCES</span>
            <ul class="resources-list">
              {% for resource in challenge.resource_set.all %}
              <li>{{ resource.name }}</li>
              {% endfor %}
            </ul>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% if forloop.counter|divisibleby:2 %}
    <div class="clearfix"></div>
    {% endif %}
    {% endfor %}

  </div>


  <div class="m-t-lg">
    {% include 'profiles/educator/dashboard/_membership-blurb.html' %}
  </div>

</div>
{% endblock %}

{% block js %}
  <!-- script that makes "more" say "less" after you click in expandable cards -->
  <script>
  $("a[data-text-swap]").on("click", function() {
    var el = $(this);
    if (el.text() == el.data("text-swap")) {
      el.text(el.data("text-original"));
    } else {
      el.data("text-original", el.text());
      el.text(el.data("text-swap"));
    }
    });
  </script>
{% endblock %}
