{% extends "curiositymachine/layout/base.html" %}
{% load staticfiles %}
{% load resized %}
{% block title %}Curiosity Machine - Home{% endblock %}
{% block body-classes %}educator-dashboard{% endblock %}

{% block content %}

<!-- begin header -->
<div class="educator-dashboard-header p-b-md p-t-md m-b">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a href="{% url 'profiles:profile_edit' %}" class="action-img pull-right"><i class="icon-brush"></i> Edit Profile</a>
        <div class="dashboard-avatar">
          {% include "_avatar.html" with profile=request.user.profile width=60 height=60 crop='thumb' gravity='faces' %}
        </div>
        {% if request.user.first_name or request.user.last_name %}
        {{ request.user.first_name }} {{ request.user.last_name }}
        {% else %}
        <em>No name provided</em>
        {% endif %}
        <br>
        <span class="dashboard-inline-username">{{ request.user.username }}</span>
      </div>
    </div>
    <div class="row m-t hidden-sm-down">
      <div class="col-md-12">
        <strong>Email:</strong> {{ request.user.email }}
        <br>
        <strong>Memberships:</strong> None
      </div>
    </div>
  </div>
</div>
<!-- end header -->

<div class="container m-b-lg">

  <!-- begin navigation -->
  <div class="row m-b-lg">
    <div class="col-md-12">
      <nav class="educator-dashboard-navigation">
        <ul class="nav">
          <li class="nav-item" id="active-edu-home">
            <a class="nav-link" href="#">
              design challenges
            </a>
          </li>
          <li class="nav-item" id="active-edu-students">
            <a class="nav-link" href="#">
              students
            </a>
          </li>
          <li class="nav-item" id="active-edu-units">
            <a class="nav-link" href="#">
              units &amp; guides
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- end navigation -->

  <div class="row p-b">
    <div class="col-md-12">
      <h2>Free Design Challenges</h2>
      <p>Get started with one of our free design challenges! To view the educator resources associated with each of the challenges, click the Guide tab in the design challenge preview.</p>
    </div>
  </div>

  <div class="row">
    <!--  these expandable cards need to be 2 to a row -->

    {% for challenge in challenges %}
    <div class="col-md-6 m-b">
      <div class="expandable-card">
        <div>
          <a href="{% url "challenges:preview_inspiration" challenge_id=challenge.id %}" class="action-img">
            <img class="pull-left m-r" src="{% resized challenge.image.url width=165 height=165 crop='thumb' %}" alt="{{ challenge.name }}">
          </a>
          <div class="expandable-card-title">
            <h3>
              <a href="{% url "challenges:preview_inspiration" challenge_id=challenge.id %}" class="action-img">
                {{ challenge.name }}
              </a>
            </h3>

            <a class="expandable-card-toggle" data-text-swap="&minus; LESS INFO" data-toggle="collapse" href="#moreInfo-{{ challenge.id }}" aria-expanded="false" aria-controls="moreInfo-{{ challenge.id }}">
              &plus; MORE INFO
            </a>
          </div>
        </div>

        <div class="collapse" id="moreInfo-{{ challenge.id }}">
          <div class="expandable-card-more">
            <span class="expandable-card-more-section-title">DESCRIPTION</span>
            <p>{{ challenge.description }}</p>

            {% if challenge.resource_set.count %}
            <span class="expandable-card-more-section-title">RESOURCES</span>
            <ul class="resources-list">
              {% for resource in challenge.resource_set.all %}
              <li>{{ resource.name }}</li>
              {% endfor %}
            </ul>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% if forloop.counter|divisibleby:2 %}
    <div class="clearfix"></div>
    {% endif %}
    {% endfor %}

  </div>


  <div class="m-t-lg">
    <!-- begin membership blurb -->
    <div class="row">
      <div class="col-md-12">
        <div class="dotted-well text-center">
          <h2>Curiosity Machine is better with a Membership</h2>
          <p>With a membership, you can view your studentsâ€™ progress, access more design challenges and exclusive resources, and are also guaranteed access to all upcoming features. To learn more about what memberships offer, check out our memberships about page and fill out our interest form!</p>
          <a href="https://docs.google.com/forms/d/1DH10-vj1U7x93LTwPX6FoJRF1WyH2eRhVtZ46XkdD78/viewform" class="btn btn-primary">Fill Out Interest Form</a>
        </div>
      </div>
    </div>
    <!-- end membership blurb -->
  </div>

</div>
{% endblock %}

{% block js %}
  <!-- script that makes "more" say "less" after you click in expandable cards -->
  <script>
  $("a[data-text-swap]").on("click", function() {
    var el = $(this);
    if (el.text() == el.data("text-swap")) {
      el.text(el.data("text-original"));
    } else {
      el.data("text-original", el.text());
      el.text(el.data("text-swap"));
    }
    });
  </script>
{% endblock %}
