{% extends "curiositymachine/layout/base.html" %}
{% load widget_tweaks %}

{% block title %}Password Change{% endblock %}
{% block body-classes %}password-change{% endblock %}

{% block content %}
<div class="contianer-fluid text-center jumbotron-green">
  <h1>Password Change</h1>
</div>
<div class="container m-b-xl">
  {% if form.errors %}
  <p class="text-center text-danger">
    {% if form.errors.items|length == 1 %}Please correct the error below.{% else %}Please correct the errors below.{% endif %}
  </p>
  {% endif %}

  <p class="text-center">
    Please enter your old password, and then enter a new password.
  </p>

  <div class="form-body">
    <form action="" method="post">
      {% csrf_token %}
      <fieldset class="form-group {% if form.old_password.errors %}has-error{% endif %}">
        <label for="id_old_password" class="required">Old password:</label>
        {{ form.old_password|add_class:"form-control" }}
        {% for error in form.old_password.errors %}
          <small class="text-muted help-block">{{ error }}</small>
        {% endfor %}
      </fieldset>

      <fieldset class="form-group {% if form.new_password1.errors %}has-error{% endif %}">
        <label for="id_new_password1" class="required">New password:</label>
        {{ form.new_password1|add_class:"form-control" }}
        {% for error in form.new_password1.errors %}
          <small class="text-muted help-block">{{ error }}</small>
        {% endfor %}
      </fieldset>

      <fieldset class="form-group {% if form.new_password2.errors %}has-error{% endif %}">
        <label for="id_new_password2" class="required">Confirm password:</label>
        {{ form.new_password2|add_class:"form-control" }}
        {% for error in form.new_password2.errors %}
          <small class="text-muted help-block">{{ error }}</small>
        {% endfor %}
      </fieldset>

      <input type="submit" class="btn btn-primary btn-lg pull-right" value="Save" class="default" />
    </form>
    <form action="{% url "password_reset_recover" %}" method="post">
      {% csrf_token %}
      <input type="hidden" id="id_username_or_email" name="username_or_email" value="{{request.user.username}}">
      <input type="submit" class="btn btn-link pull-left p-l-0" value="I forgot my password">
    </form>
  </div>

  <script type="text/javascript">document.getElementById("id_old_password").focus();</script>
</div>
{% endblock %}
