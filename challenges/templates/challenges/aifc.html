{% extends "challenges/list.html" %}

{% block js %}
  <script>
    if (window.URL && window.history && window.history.replaceState) {
      $(function () {
        var url = new URL(window.location);
        $('a[data-toggle="pill"]').on('shown.bs.tab', function(e) {
          url.searchParams.set('stage', $(e.target).attr('href').substr(-1));
          history.replaceState(null, null, url.toString());
        });
      });
    }
  </script>
{% endblock %}
{% block challenges %}
  <ul class="nav nav-pills my-5 justify-content-center" role="tablist">
    {% for list in stages %}
    <li class="nav-item mx-3">
      <a
        class="nav-link {% if forloop.counter == active_stage %}active {% endif %}"
        id="stage-{{ forloop.counter }}-tab"
        data-toggle="pill"
        href="#stage-{{ forloop.counter }}"
        role="tab"
        aria-controls="stage-{{ forloop.counter }}"
        aria-selected="true"
      >Stage {{ forloop.counter }}</a>
    </li>
    {% endfor %}
  </ul>
  <div class="tab-content">
    {% for list in stages %}
    <div
      class="tab-pane {% if forloop.counter == active_stage %}show active{% endif %}"
      id="stage-{{ forloop.counter }}"
      role="tabpanel"
      aria-labelledby="stage-{{ forloop.counter }}-tab"
    >
      <div class="row">
      {% for obj in list %}
        {% include "challenges/_list_card.html" with challenge=obj %}
      {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
{% endblock %}
